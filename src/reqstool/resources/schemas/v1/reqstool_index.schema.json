{
    "$id": "https://raw.githubusercontent.com/Luftfartsverket/reqstool-client/main/src/reqstool/resources/schemas/v1/reqstool_index.schema.json",
    "$schema": "https://json-schema.org/draft/2020-12/schema#",
    "type": "object",
    "properties": {
        "language": {
            "type": "string",
            "enum": [
                "java",
                "python",
                "javascript",
                "typescript"
            ],
            "description": "The programming language used in the project."
        },
        "build": {
            "type": "string",
            "enum": [
                "gradle",
                "hatch",
                "maven",
                "npm",
                "poetry",
                "yarn"
            ],
            "description": "The build tool used for the project."
        },
        "version": {
            "type": "string",
            "pattern": "^\\d+\\.\\d+\\.\\d+.*$",
            "description": "The version of the project, following semantic versioning."
        },
        "resources": {
            "type": "object",
            "properties": {
                "requirements": {
                    "type": "string",
                    "description": "Path to the requirements.yml file"
                },
                "software_verification_cases": {
                    "type": "string",
                    "description": "Path to the software_verification_cases.yml"
                },
                "manual_verification_results": {
                    "type": "string",
                    "description": "Path to the manual_verification_results.yml"
                },
                "annotations": {
                    "type": "string",
                    "description": "Path to the annotations file providing additional context or metadata."
                },
                "test_results": {
                    "type": "array",
                    "items": {
                        "type": "string"
                    },
                    "description": "List of URIs to the test result files."
                }
            },
            "required": [
                "requirements"
            ],
            "description": "Resources associated with the project, including requirements, verification cases, and test results."
        }
    },
    "required": [
        "language",
        "build",
        "version",
        "resources"
    ],
    "allOf": [
        {
            "if": {
                "properties": {
                    "language": {
                        "const": "python"
                    }
                }
            },
            "then": {
                "properties": {
                    "build": {
                        "enum": [
                            "hatch",
                            "poetry"
                        ]
                    }
                }
            }
        },
        {
            "if": {
                "properties": {
                    "language": {
                        "const": "java"
                    }
                }
            },
            "then": {
                "properties": {
                    "build": {
                        "enum": [
                            "maven",
                            "gradle"
                        ]
                    }
                }
            }
        },
        {
            "if": {
                "properties": {
                    "language": {
                        "const": "javascript"
                    }
                }
            },
            "then": {
                "properties": {
                    "build": {
                        "enum": [
                            "npm",
                            "yarn"
                        ]
                    }
                }
            }
        },
        {
            "if": {
                "properties": {
                    "language": {
                        "const": "typescript"
                    }
                }
            },
            "then": {
                "properties": {
                    "build": {
                        "enum": [
                            "npm",
                            "yarn"
                        ]
                    }
                }
            }
        }
    ]
}